var r;(e=>(e.statically="https://cdn.statically.io/gh/{owner}/{repo}/{branch}/{file}",e.githack="https://raw.githack.com/{owner}/{repo}/{branch}/{file}",e.GITHACK="githack",e.STATICALLY="statically",e.old_version="https://{owner}.github.io/{repo}/{file}",e.gh_api="https://api.github.com/repos/{owner}/{repo}/pulls/{number}",e.html_diff="https://services.w3.org/htmldiff?doc1={old}&doc2={new}",e.spec_gen="https://labs.w3.org/spec-generator/?type=respec&url={url}",e.markdown=`
See:

* [Preview]({preview})
* [Diff]({diff})
`))(r||={});function f(n,o,p,a,c="index.html"){let s=m=>m.replace(/\?/g,"%3F").replace(/&/g,"%26"),t=o.head.repo.full_name.split("/"),l={owner:t[0],repo:t[1]},g={branch:o.head.ref},i=(p===r.GITHACK?r.githack:r.statically).replace("{owner}",l.owner).replace("{repo}",l.repo).replace("{branch}",g.branch).replace("{file}",c),d=r.old_version.replace("{owner}",n.owner).replace("{repo}",n.repo).replace("{file}",c),u=a?s(r.spec_gen.replace("{url}",i)):i,w=a?s(r.spec_gen.replace("{url}",d)):d;return{new:i,diff:r.html_diff.replace("{old}",w).replace("{new}",u)}}async function h(n,o,p=!0,a=["index.html"]){let c=async i=>await(await fetch(i)).json(),s=new URL(n).pathname.split("/"),t={owner:s[1],repo:s[2]},l=s[4],g=r.gh_api.replace("{owner}",t.owner).replace("{repo}",t.repo).replace("{number}",l),e=await c(g);return a.map(i=>f(t,e,o,p,i))}async function v(n){try{let o=document.getElementById("url"),p=document.getElementById("service"),c=!document.getElementById("text").checked,s=document.getElementById("markdown"),t=await h(o.value,p.value,c);s.value=r.markdown.replace("{preview}",t[0].new).replace("{diff}",t[0].diff)}catch(o){alert(`preview error: ${o}`)}}globalThis.addEventListener("load",()=>{let n=document.getElementById("go");n&&n.addEventListener("click",v)});

(function(e){e.statically="https://cdn.statically.io/gh/{owner}/{repo}/{branch}/{file}",e.githack="https://raw.githack.com/{owner}/{repo}/{branch}/{file}",e.GITHACK="githack",e.STATICALLY="statically",e.old_version="https://{owner}.github.io/{repo}/{file}",e.gh_api="https://api.github.com/repos/{owner}/{repo}/pulls/{number}",e.html_diff="https://services.w3.org/htmldiff?doc1={old}&doc2={new}",e.spec_gen="https://labs.w3.org/spec-generator/?type=respec&url={url}",e.markdown=`
See:

* [Preview]({preview})
* [Diff]({diff})
`})(c||(c={}));function b(e,n,t,r,l="index.html"){let i=y=>y.replace(/\?/g,"%3F").replace(/&/g,"%26"),s=n.head.repo.full_name.split("/"),p={owner:s[0],repo:s[1]},h={branch:n.head.ref},o=(t===c.GITHACK?c.githack:c.statically).replace("{owner}",p.owner).replace("{repo}",p.repo).replace("{branch}",h.branch).replace("{file}",l),m=c.old_version.replace("{owner}",e.owner).replace("{repo}",e.repo).replace("{file}",l),w=r?i(c.spec_gen.replace("{url}",o)):o,_=r?i(c.spec_gen.replace("{url}",m)):m;return{new:o,diff:c.html_diff.replace("{old}",_).replace("{new}",w)}}async function d(e,n,t=!0,r=["index.html"]){let l=async o=>await(await fetch(o)).json(),i=new URL(e).pathname.split("/"),s={owner:i[1],repo:i[2]},p=i[4],h=c.gh_api.replace("{owner}",s.owner).replace("{repo}",s.repo).replace("{number}",p),a=await l(h);return r.map(o=>b(s,a,n,t,o))}var c;var u={id:"epub",family:"EPUB 3",repo_owner:"w3c",repo_name:"epub-specs",parts:[{path:"epub34/overview/index.html",title:"EPUB 3 Overview",short_name:"overview"},{path:"epub34/authoring/index.html",title:"EPUB 3.4",short_name:"core"},{path:"epub34/rs/index.html",title:"EPUB 3.4 Reading Systems",short_name:"rs"},{path:"epub34/annotations/index.html",title:"EPUB 3 Annotations",short_name:"epub-ann"},{path:"wg-notes/annotations-ucr/index.html",title:"EPUB Annotations Use Cases and Requirements",short_name:"epub-ann-ucr"},{path:"wg-notes/multi-rend/index.html",title:"EPUB Multiple-Rendition Publications",short_name:"multi-rend"},{path:"wg-notes/tts/index.html",title:"EPUB 3 Text-to-Speech Enhancements",short_name:"tts"},{path:"epub34/a11y/index.html",title:"EPUB Accessibility 1.1.1",short_name:"a11y"},{path:"epub34/a11y-tech/index.html",title:"EPUB Accessibility Techniques",short_name:"a11y-tech"},{path:"wg-notes/epub-a11y-eaa-mapping/index.html",title:"EPUB Accessibility - EU Accessibility Act Mapping",short_name:"epub-a11y-eaa-mapping"},{path:"wg-notes/a11y-exemption/index.html",title:"The EPUB Accessibility exemption property",short_name:"a11y-exemption"},{path:"wg-notes/fxl-a11y/index.html",title:"EPUB Fixed Layout Accessibility",short_name:"fxl-a11y"},{path:"wg-notes/fxl-a11y-tech/index.html",title:"EPUB Fixed Layout Accessibility Techniques",short_name:"fxl-a11y-tech"},{path:"wg-notes/ssv/index.html",title:"EPUB 3 Structural Semantics Vocabulary",short_name:"fxl-a11y-tech"}]};var x=[u];function f(e){let n=x.find(t=>t.id?t.id.toLowerCase()===e.toLowerCase():t.family.toLowerCase()===e.toLowerCase());if(n===void 0)throw new Error(`Unknown family of specification: ${e}`);return n}var v=`
See:

`,E=`* For {title}:
    * [Preview]({preview})
    * [Diff]({diff})
`;function B(e){let n=s=>'<input type="checkbox" name="{short_name}" id="{short_name}"><label for="{short_name}">{title}</label><br>\xA0\xA0'.replaceAll("{short_name}",s.short_name).replaceAll("{title}",s.title),t=document.getElementsByTagName("title").item(0);t&&t.textContent&&(t.textContent=t.textContent.replace("{title}",e.family));let r=document.querySelector("header h1");r&&r.textContent&&(r.textContent=r.textContent.replaceAll("{title}",e.family));let l=["Specifications:<br/>\xA0\xA0",...e.parts.map(n)].join(`
`).slice(0,-6),i=document.getElementById("spec_choices");i&&(i.innerHTML=l)}async function U(e,n){try{let t=document.getElementById("number"),r=(a=>{if(a)return`https://github.com/${n.repo_owner}/${n.repo_name}/pull/${a}`;throw"No PR number has been provided."})(t.value),l=document.getElementById("service"),i=n.parts.filter(a=>{let o=document.getElementById(a.short_name);return!(o===null||o.checked===!1)}),p=(await d(r,l.value,!0,i.map(a=>a.path))).reduce((a,o,m)=>a+E.replace("{title}",i[m].title).replace("{preview}",o.new).replace("{diff}",o.diff),""),h=document.getElementById("markdown");h.value=v+p}catch(t){alert(`preview error: ${t}`)}}globalThis.addEventListener("load",()=>{try{let e=document.getElementsByTagName("html").item(0);if(e===null)throw new Error("No html element???");let n=e.dataset.preview;if(n==null)throw new Error("No family id provided");let t=f(n);B(t);let r=document.getElementById("go");r&&r.addEventListener("click",l=>U(l,t))}catch(e){alert(`${e}`)}});
